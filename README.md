# FigmaBridge

> **Figmaのノード/ページ/ファイルのインポート・エクスポートをするプラグイン**

---

## 概要

FigmaBridgeは、FigmaのデザインデータをZIPファイル形式でエクスポート・インポートできるFigmaプラグインです。デザインの共有やバックアップ、異なるFigmaファイル間でのデータ移行を支援します。

## 機能

### エクスポート機能
- **選択されたノード**: 現在選択されているノードのみをエクスポート
- **現在のページ**: 現在のページに含まれるすべてのノードをエクスポート

### インポート機能
- ZIPファイルからFigmaノードを復元
- 階層構造の保持
- 画像データの復元
- スタイル情報の復元

### 対応ノードタイプ
- フレーム (Frame)
- グループ (Group)
- テキスト (Text)
- 図形 (矩形、楕円、多角形、星、ベクター、線)
- 画像 (画像フィルを持つノード)
- シンボル/コンポーネント (基本情報のみ)

## 制限事項

### マスク処理の制限
- **マスク構造の完全復元**: マスク処理（isMask）の復元は部分的にのみ対応
- **マスク順序**: マスク用ノードの順序が正しく復元されない場合がある
- **複雑なマスク**: ネストしたマスクや複雑なマスク構造は完全に復元されない

### その他の制限
- **グラデーション**: グラデーションの詳細情報は保存されない
- **アニメーション**: アニメーション情報は保存・復元されない
- **プロトタイプ**: プロトタイプのリンクやインタラクション情報は保存されない
- **プラグインデータ**: 他のプラグインで作成されたデータは保存されない

詳細な制限事項については、[詳細仕様書](./docs/figma-bridge-specification.md)を参照してください。

## フォルダ構成

```plaintext
./figma
  ├─ manifest.json   # プラグインのマニフェスト
  ├─ code.ts        # TypeScriptソース（編集推奨）
  ├─ code.js        # ビルド後のJavaScript（Figmaで実行）
  └─ ui.html        # プラグインのUI
./docs
  └─ figma-bridge-specification.md  # 詳細仕様書
./tsconfig.json     # TypeScriptビルド設定
./package.json      # 依存・スクリプト
```

## 使い方

### セットアップ
```sh
npm install
npx tsc
```

### プラグインの読み込み
1. 上記コマンドで依存をインストール＆ビルド
2. Figmaで「figma」フォルダをプラグインとして読み込む
3. プラグインを実行する

### エクスポート
1. Figmaでプラグインを起動
2. エクスポートタイプを選択
3. 「エクスポート」ボタンをクリック
4. ZIPファイルが自動ダウンロード

### インポート
1. Figmaでプラグインを起動
2. 「ファイルを選択」でZIPファイルを選択
3. 「インポート」ボタンをクリック
4. ノードが現在のページに追加

## ビルド・開発
- TypeScriptで開発し、`npx tsc` で `code.js` を生成
- 型定義は `@figma/plugin-typings` を利用
- `figma/tsconfig.json` は不要です（ルートのtsconfig.jsonのみでOK）

## カスタマイズ
- `figma/code.ts` に独自の処理を追加できます
- `figma/ui.html` のUIを自由に編集できます

## トラブルシューティング

### よくある問題
- **エクスポートが失敗する**: 選択されたノードがない場合は、エクスポートしたいノードを選択してから実行
- **インポートが失敗する**: 無効なZIPファイルの場合は、正しいFigmaBridgeでエクスポートされたファイルを使用
- **画像が表示されない**: 画像ファイルの破損の場合は、エクスポートを再実行

### パフォーマンス
- 大きなファイル: 大量のノードを含むファイルは処理に時間がかかる
- 画像サイズ: 高解像度の画像はファイルサイズが大きくなる

## 今後の改善予定
- マスク処理の完全対応
- グラデーション対応
- バッチ処理の効率化
- プログレス表示の改善
- プレビュー機能の追加

---

このテンプレートをベースに、さまざまなFigmaプラグイン開発にご活用ください。 